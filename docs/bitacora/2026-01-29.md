# 2026-01-29

Crónica Mensual en landing: título muestra mes actual y el bloque de ganador indica el mes anterior por nombre (sin decir ‘mes anterior’).
Crónica Mensual del landing: 1 sola corona para líder actual, bloque de ganador del mes anterior (fallback Aldrik Vhar), y paleta integrada estilo papiro.

Crónica Mensual en HOME: ganador mes anterior (fallback Aldrik Vhar), 1 sola corona para líder actual, estilo juego (colores HOME).

Crónica Mensual: título muestra mes actual y el bloque de ganador indica el mes anterior por nombre (sin decir ‘mes anterior’).

Home responsive: en mobile los paneles se reparten 50/50 (sin scroll) y el ranking se compacta (top 6 en mobile, top 10 en escritorio).

Verificado con tinker y comprobando en BD (SQLite/DBeaver) que la crónica mensual se pasa al landing y renderiza ranking o fallback correctamente.

Arreglada carga del CSS del landing: Vite input + guest layout + entrypoint landing/app.css + imports.

Archivos tocados:

- vite.config.js
- resources/views/layouts/guest.blade.php
- resources/css/landing/app.css
- resources/css/landing/theme.css
- resources/css/landing/components/portada.css
- resources/css/landing/components/prologo.css
- resources/css/landing/components/razas_grid.css
- resources/css/landing/components/reglas_del_juramento.css
- resources/css/landing/components/cronica_mensual.css

Comando ejecutado: npm run build (OK)

Landing verificado: vuelve el estilo papiro/libro, CSS cargado por Vite, sin errores de build.
No se tocó .env ni database.sqlite.
Commit y push hechos.

Migración real de CSS inline del landing a CSS por secciones (portada, prólogo, razas, reglas, crónica) + site_logo.

Archivos tocados:

- package-lock.json
- resources/views/guest/sections/portada.blade.php
- resources/views/guest/sections/prologo.blade.php
- resources/views/guest/sections/\_razas_grid.blade.php
- resources/views/guest/sections/reglas_del_juramento.blade.php
- resources/views/guest/sections/cronica_mensual.blade.php
- resources/views/partials/site_logo.blade.php
- resources/css/landing/components/portada.css
- resources/css/landing/components/prologo.css
- resources/css/landing/components/razas_grid.css
- resources/css/landing/components/reglas_del_juramento.css
- resources/css/landing/components/cronica_mensual.css
- resources/css/shared/components/site_logo.css
- resources/css/landing/app.css

Comandos ejecutados: npm run build, verificación Select-String a cero.
Comando adicional: npm i (reinstalación dependencias para build).

Se restauró theme del landing + imports correctos.

AUTH: Eliminado botón de tema en páginas de autenticación (login/register/forgot/etc).
LANDING: Razas: renombrado a “Razas de Valtherion” y sección más ancha solo en desktop para lectura completa.
Comando ejecutado: npm run build.
Resultado: /login sin botón de tema, landing OK.

---

Admin (logo navbar superior):

- Si el usuario es admin, el logo de la navbar superior ahora fuerza re-login y redirige al panel admin.
- Si el usuario no es admin, el logo mantiene el comportamiento actual (Home).
- El panel admin usa la estructura del Home con layout de juego y doble navbar.

Archivos tocados:

- resources/views/game/partials/nav_top.blade.php
- routes/web.php
- resources/views/admin/index.blade.php
- app/Http/Controllers/Auth/AdminAuthenticatedSessionController.php
- resources/views/auth/admin-login.blade.php

Notas:

- `/admin/login` usa un login propio (no el `login.blade.php` general).
- El login admin valida rol y bloquea usuarios no admin.

```

```

---

Personaje (base funcional) + bloqueo de acceso sin personaje.

Objetivo:
- Creación y gestión de personaje (crear/editar/borrar) y regla de acceso a secciones.

Archivos tocados:
- app/Http/Controllers/CharacterController.php
- app/Http/Controllers/HomeController.php
- app/Http/Middleware/EnsureHasCharacter.php
- app/Models/Character.php
- app/Models/User.php
- bootstrap/app.php
- database/migrations/2026_01_23_091224_create_characters_table.php
- resources/views/game/character/create.blade.php
- resources/views/game/character/edit.blade.php
- resources/views/game/home/index.blade.php
- routes/web.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5
- php artisan --version (falló: php no disponible)
- php artisan route:list (falló: php no disponible)
- ls -la database/migrations
- rg -n "characters|equipment|inventory|items" database/migrations
- ls -la app/Models

Verificación:
- No se pudo ejecutar tinker ni migrate por falta de php en el entorno.
- Pendiente comprobar en BD (SQLite/DBeaver) que la tabla characters existe y user_id es unique.

No se tocó .env ni database.sqlite.

---

Ajustes (zona logueada) funcionales:
- Preferencias persistentes en localStorage y clases en body.
- Cambio de contraseña (ruta Breeze) y cierre de sesión.

Archivos tocados:
- resources/views/game/ajustes.blade.php
- resources/css/game/components/ajustes.css
- resources/css/game/theme.css
- resources/js/game/settings.js
- resources/js/game/app.js

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5
- php artisan route:list | findstr /i "ajustes settings password" (falló: php y findstr no disponibles)

Verificación:
- Pendiente en navegador: /game/ajustes, guardar preferencias y cambio de contraseña.

No se tocó .env ni database.sqlite.

---

Ajustes (layout compacto y centrado):
- Paneles en 2 filas, 1 columna, centrados y sin scroll en mobile/desktop.
- Contenido más compacto para encajar entre navbars.

Archivos tocados:
- resources/views/game/ajustes.blade.php
- resources/css/game/components/ajustes.css

Comandos ejecutados:
- git status --porcelain

Verificación:
- Pendiente en navegador: comprobar centrado real y sin scroll.

No se tocó .env ni database.sqlite.

---

Perfil (zona logueada) compacto y funcional:
- Edición de nombre y correo con validación real y disponibilidad en BD.
- Endpoint de disponibilidad y JS sin inline.
- Resumen de personaje compacto sin scroll.

Archivos tocados:
- app/Http/Controllers/GameProfileController.php
- app/Http/Controllers/ProfileController.php
- app/Http/Requests/ProfileUpdateRequest.php
- resources/views/game/perfil.blade.php
- resources/js/game/profile.js
- resources/js/game/app.js
- resources/css/game/components/perfil.css
- resources/css/game/theme.css
- routes/web.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5
- php artisan route:list | rg -i "game/perfil|profile" (falló: php no disponible)

Verificación:
- Pendiente en navegador: /game/perfil, sin scroll y validación real.

No se tocó .env ni database.sqlite.

---

Perfil (personaje, oro y experiencia):
- Resumen del personaje ligado al usuario con oro y experiencia.
- Estilo compacto similar a Ajustes.

Archivos tocados:
- app/Http/Controllers/GameProfileController.php
- resources/views/game/perfil.blade.php
- resources/css/game/components/perfil.css
- database/migrations/2026_01_29_230000_add_gold_xp_to_characters_table.php

Comandos ejecutados:
- git status --porcelain

Verificación:
- Pendiente ejecutar migrate y comprobar en /game/perfil.

No se tocó .env ni database.sqlite.

---

Seed de objetos base para tienda:
- Seeder idempotente para armas, armaduras, accesorios y montura.
- Rarezas y bonos según regla (+1/+2/+3), montura con velocidad+defensa fija.

Archivos tocados:
- database/seeders/ShopItemsSeeder.php
- database/seeders/DatabaseSeeder.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5
- rg -n "items|equipment|inventory|mount|shop" database/migrations

Verificación:
- Verificado con tinker y comprobando en BD (SQLite/DBeaver) que los objetos se han insertado sin duplicarse. (Pendiente en este entorno: php no disponible)

No se tocó .env ni database.sqlite.

---

Códigos de recompensa (admin + canje en ajustes):
- Admin: creación de código manual + select de recompensa.
- Ajustes: canjeo de código con mensajes de estado.
- Tabla reward_codes y controlador dedicado.

Archivos tocados:
- app/Http/Controllers/Admin/RewardCodeController.php
- app/Http/Controllers/GameRewardCodeController.php
- app/Models/RewardCode.php
- resources/views/admin/index.blade.php
- resources/views/game/ajustes.blade.php
- resources/css/game/components/ajustes.css
- routes/web.php
- database/migrations/2026_01_29_231000_create_reward_codes_table.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5

Verificación:
- Pendiente ejecutar migrate y probar /admin y /game/ajustes.

No se tocó .env ni database.sqlite.

---

Tienda semanal (rotación estable) + montura elegida en Admin:
- Tabla shop_weekly_offers para guardar ofertas por semana.
- Servicio WeeklyShopService con selección determinista y sin cambios dentro de la misma semana.
- /game/tienda con 4 filas (armaduras, armas, accesorios, montura) sin scroll y con CSS dedicado.
- /admin/tienda para seleccionar montura de la semana.

Archivos tocados:
- app/Services/WeeklyShopService.php
- app/Models/ShopWeeklyOffer.php
- app/Http/Controllers/Game/ShopController.php
- app/Http/Controllers/Admin/ShopController.php
- resources/views/game/tienda.blade.php
- resources/views/admin/shop.blade.php
- resources/css/game/components/tienda.css
- resources/css/game/theme.css
- routes/web.php
- database/migrations/2026_01_29_232000_create_shop_weekly_offers_table.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5

Verificación:
- Pendiente ejecutar migrate y validar en /game/tienda y /admin/tienda.

No se tocó .env ni database.sqlite.

---

Tienda (fallback sin tabla semanal) + ajustes compactos:
- Tienda muestra objetos aunque no exista shop_weekly_offers (si hay items).
- Mensaje claro cuando no hay items en BD.
- Ajustes: input de recompensa más compacto y sin cortes.

Archivos tocados:
- app/Services/WeeklyShopService.php
- resources/views/game/tienda.blade.php
- resources/css/game/components/ajustes.css
- resources/views/game/ajustes.blade.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5

Verificación:
- Pendiente ejecutar seeder de items y validar en /game/tienda.

No se tocó .env ni database.sqlite.

---

Equipamiento (pantalla dedicada) + perfil sin equipo/inventario:
- Nueva pantalla /game/equipamiento con selects por slot y validación de inventario.
- Perfil: acceso directo a la Armería.
- Lógica sin scroll y CSS dedicado.

Archivos tocados:
- app/Http/Controllers/Game/EquipamientoController.php
- resources/views/game/equipamiento.blade.php
- resources/views/game/perfil.blade.php
- resources/css/game/components/equipamiento.css
- resources/css/game/theme.css
- routes/web.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5

Verificación:
- Pendiente ejecutar migrate/seed y validar /game/equipamiento.

No se tocó .env ni database.sqlite.

---

Admin: selección directa de montura semanal:
- /admin permite elegir la montura semanal con un select de monturas.

Archivos tocados:
- app/Http/Controllers/Admin/RewardCodeController.php
- resources/views/admin/index.blade.php

Comandos ejecutados:
- git status --porcelain
- git branch --show-current
- git log --oneline -5

Verificación:
- Pendiente validar selección de montura en /admin.

No se tocó .env ni database.sqlite.
